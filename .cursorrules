# CMSForNerd AI Context

## Development Environment
- **Operating System:** Cross-platform (Windows 11, Debian, Ubuntu, AlmaLinux, FreeBSD)
- **Terminal:** Google Antigravity (Windows PowerShell) or Bash (Linux)
- **Server:** Laravel Herd (Windows) or native PHP-FPM + Nginx (Linux)
- **Editor:** Cursor / VS Code with PHP Intelephense
- **Browser:** Mozilla Firefox (Strict privacy/standards testing)

**Path Safety:** All file operations MUST use `__DIR__` and forward slashes `/` for cross-platform compatibility and performance.

## Project Standards
- **Coding Standard:** PSR-12 (enforced via PHP_CodeSniffer).
- **Declaration/Execution (PSR-1):** Files in `includes/` MUST only declare symbols (classes, functions, constants). Execution logic MUST reside in root Front Controllers or `bootstrap.php`.
- **Documentation:** RFC 2119 terminology (MUST, SHOULD, RECOMMENDED).
- **Security:** RFC 9116 (security.txt for vulnerability disclosure).
- **Type Safety:** `declare(strict_types=1);` MUST be present in all PHP files.

## Architecture Patterns
- **Bootstrap Pattern:** All root entry points MUST load `includes/bootstrap.php` to initialize the environment.
- **Template System:** "Pair Logic" - Each page has an entry point `.php` and content `.inc` file in `contents/` directory.
- **Context Object:** `\CmsForNerd\CmsContext` is used instead of global variables.
- **Null Safety:** Use Null Coalescing Operator (`??`) for all configuration extractions from `$config`.
- **Namespacing:** All core logic MUST be inside `namespace CmsForNerd;`. Root calls MUST use FQCN (e.g., `new \CmsForNerd\CmsContext()`).

## Testing & Compliance
- **Test Framework:** PHPUnit 11.5+
- **Compliance Command:** `composer compliance` (runs PHPCS + PHPUnit).
- **Lab Check:** `composer lab-check` (verifies bootstrap and documentation structure).
- **Style Fixing:** `composer fix-style` (auto-fixes PSR-12 violations).

## File Naming Conventions
- Entry points: `{page-name}.php` (e.g., `index.php`, `installation.php`).
- Content files: `contents/{page-name}-body.inc`.
- Core Logic: `includes/{ClassName}.php` or `includes/{function-name}.inc.php`.

## AI Assistant Guidelines
When generating code for this project:
1. Always add `declare(strict_types=1);` after the opening PHP tag.
2. Ensure the "Bootstrap Pattern" is followed: `require_once __DIR__ . '/includes/bootstrap.php'`.
3. Separate side effects from declarations: Do not execute logic inside files meant for `includes/`.
4. Use the "Pair Logic" pattern for new pages.
5. Update `contents/history-body.inc` to document major architectural refactors.
6. Use type-safe fallbacks for all variables extracted from the `$config` array.

## Educational Context
This is a **learning laboratory CMS** designed to teach modern backend engineering. All code should be:
- Educational (well-commented with RFC 2119 keywords and laboratory-style annotations).
- Secure (defense-in-depth approach; strict sanitization).
- Portable (tested for Windows/Linux/Unix/FreeBSD).
- AI-native (structured specifically for management by AI agents).